---
title: 后端 - 使用RPC
type:  docs
sidebar_position: 2
---


:::tip 申明api
## **通过api.Api定义doptime函数**
::: 
 
```go   title="main.go"
package main

import (
	"github.com/doptime/doptime/api"
)

type InDemo struct {
	Id   string `mapstructure:"JwtId" validate:"required"`
}

//var DemoRpc = api.Rpc[*InDemo, string](options ...*api.ApiOption)
var DemoRpc = api.Rpc[*InDemo, string]()
result, err := DemoRpc.Call(&InDemo{Id:"123"})

```
> RPC 的使用方式同api  
> RPC 的可选参数与api的可选参数相同  
> 和api 一样，RPC的入参和出参也通过mapstructure定义